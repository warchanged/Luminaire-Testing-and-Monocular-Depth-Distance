# 网线直连配置快速指南

## 当前状态
- ✅ Windows PC IP: 192.168.10.100 (已配置)
- ❌ Jetson IP: 192.168.10.135 (需要配置)
- ❌ 连接状态: 无法ping通

## 问题诊断
连接超时通常是因为：
1. Jetson设备未开机
2. Jetson的IP未配置或不正确
3. Jetson的SSH服务未启动
4. 网线连接问题

---

## 解决方案

### 方案1: 通过HDMI配置Jetson (推荐)

如果你有显示器和键盘连接到Jetson：

#### 步骤1: 在Jetson上配置网络

```bash
# 查看当前IP
ifconfig

# 查看网络接口状态
ip addr show

# 配置静态IP (使用NetworkManager)
sudo nmcli con show  # 查看连接名称

# 假设连接名为 "Wired connection 1"
sudo nmcli con mod "Wired connection 1" ipv4.addresses 192.168.10.135/24
sudo nmcli con mod "Wired connection 1" ipv4.method manual
sudo nmcli con down "Wired connection 1"
sudo nmcli con up "Wired connection 1"

# 验证配置
ip addr show eth0
```

#### 步骤2: 启动SSH服务

```bash
# 检查SSH状态
sudo systemctl status ssh

# 如果未运行，启动SSH
sudo systemctl enable ssh
sudo systemctl start ssh
```

#### 步骤3: 测试连接

在Jetson上：
```bash
# 测试能否ping通Windows
ping 192.168.10.100
```

在Windows上：
```powershell
# 测试能否ping通Jetson
ping 192.168.10.135

# SSH连接
ssh haoyu@192.168.10.135
```

---

### 方案2: 使用配置脚本

#### 在Jetson上运行 (通过HDMI访问)：

1. 如果有U盘，将 `setup_jetson_network.sh` 复制到Jetson
2. 运行脚本：
```bash
chmod +x setup_jetson_network.sh
sudo ./setup_jetson_network.sh
# 选择选项1 (Configure for direct connection)
```

---

### 方案3: 手动配置 (临时方法)

在Jetson上（通过HDMI）：

```bash
# 快速设置IP (重启后失效)
sudo ifconfig eth0 192.168.10.135 netmask 255.255.255.0 up

# 启动SSH
sudo systemctl start ssh

# 测试
ping 192.168.10.100
```

---

## 验证网络连接

### 在Windows上运行：

```powershell
# 1. 检查Windows IP配置
ipconfig

# 应该看到：
# Ethernet adapter Ethernet:
#   IPv4 Address: 192.168.10.100
#   Subnet Mask: 255.255.255.0

# 2. 测试连接
ping 192.168.10.135

# 3. 如果ping通，尝试SSH
ssh haoyu@192.168.10.135
# 密码: Signify@1234
```

---

## 物理连接检查

确认以下几点：
- ✅ 网线两端已牢固插入
- ✅ Jetson网口LED灯亮起（绿色/橙色）
- ✅ Windows网口LED灯亮起
- ✅ Jetson已开机（电源指示灯亮）

---

## 常见问题

### Q: 仍然无法ping通？
A: 检查防火墙设置：

在Windows上：
```powershell
# 允许ICMP (ping)
New-NetFirewallRule -DisplayName "Allow ICMPv4" -Protocol ICMPv4 -IcmpType 8 -Enabled True -Profile Any -Action Allow
```

在Jetson上：
```bash
# 检查防火墙
sudo ufw status

# 如果启用，允许SSH
sudo ufw allow ssh
```

### Q: Jetson的网络接口名称是什么？
A: 常见的接口名称：
- `eth0` - 传统命名
- `enp0s31f6` - 新式命名
- 使用 `ip link show` 查看所有接口

### Q: 如何重置Windows网络配置？
A: 运行管理员PowerShell：
```powershell
# 查看当前配置
Get-NetIPAddress -InterfaceAlias "Ethernet"

# 重置为DHCP
Remove-NetIPAddress -InterfaceAlias "Ethernet" -Confirm:$false
Set-NetIPInterface -InterfaceAlias "Ethernet" -Dhcp Enabled
```

---

## 配置成功后的部署步骤

一旦网络连接成功：

```powershell
# 1. 传输部署文件
scp -r C:\Users\670358474\Desktop\jetson_deploy\* haoyu@192.168.10.135:~/luminaire-detection/

# 2. SSH登录
ssh haoyu@192.168.10.135

# 3. 在Jetson上运行部署
cd ~/luminaire-detection
chmod +x deploy_jetson.sh
./deploy_jetson.sh
```

---

## 自动化脚本

### Windows端配置（需要管理员权限）：
```powershell
# 以管理员身份运行PowerShell，然后：
cd C:\Users\670358474\Downloads\Luminaire-Testing-and-Monocular-Depth-Distance
.\setup_network.ps1
```

### Jetson端配置（需要sudo）：
```bash
sudo ./setup_jetson_network.sh
```

---

## 技术支持

如果以上方法都不行，可能需要：
1. 检查网线是否损坏（尝试其他网线）
2. 检查网卡驱动是否正常
3. 尝试使用交叉网线（较旧设备可能需要）
4. 检查Jetson的网络接口是否被禁用

查看详细日志：
```bash
# Jetson上
sudo journalctl -u NetworkManager -f
dmesg | grep eth
```
